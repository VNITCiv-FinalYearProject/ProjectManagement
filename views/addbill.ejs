<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Running Bill</title>
    <link rel="stylesheet" href="/css/addbill.css">
</head>
<body>

    <h1>Update Bill</h1>

    <table id="billTable">
        <thead>
            <tr>
                <th>Serial No.</th>
                <th>Item</th>
                <th>Quantity</th>
                <th>Rate</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            <!-- Rows will be dynamically added here -->
        </tbody>
    </table>

    <div class="total">
        Total Amount: <span id="totalAmount">0</span>
    </div>

    <button class="button" onclick="addRow()">Add New Item</button>

    <script>
        let serialNo = 1;
        let totalAmount = 0;

        // Function to add a new row to the bill
        function addRow() {
            const table = document.getElementById('billTable').getElementsByTagName('tbody')[0];
            const newRow = table.insertRow();
            const serialCell = newRow.insertCell(0);
            const itemCell = newRow.insertCell(1);
            const quantityCell = newRow.insertCell(2);
            const rateCell = newRow.insertCell(3);
            const amountCell = newRow.insertCell(4);

            serialCell.textContent = serialNo++; // Serial No.

            // Input fields for item, quantity, and rate
            itemCell.innerHTML = '<input type="text" placeholder="Item">';
            quantityCell.innerHTML = '<input type="number" placeholder="Quantity" oninput="calculateAmount(this)">';
            rateCell.innerHTML = '<input type="number" placeholder="Rate" oninput="calculateAmount(this)">';
            amountCell.textContent = '0'; // Initial amount
        }

        // Function to calculate the amount when quantity or rate changes
        function calculateAmount(input) {
            const row = input.parentElement.parentElement;
            const quantity = row.cells[2].getElementsByTagName('input')[0].value;
            const rate = row.cells[3].getElementsByTagName('input')[0].value;
            const amountCell = row.cells[4];
            const amount = (quantity * rate) || 0;

            amountCell.textContent = amount.toFixed(2); // Update amount
            updateTotal();
        }

        // Function to update the total amount
        function updateTotal() {
            let total = 0;
            const table = document.getElementById('billTable').getElementsByTagName('tbody')[0];
            for (let i = 0; i < table.rows.length; i++) {
                const amount = parseFloat(table.rows[i].cells[4].textContent);
                total += amount;
            }
            document.getElementById('totalAmount').textContent = total.toFixed(2); // Update total amount
        }
    </script>

</body>
</html>